<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css" />
    <link rel="icon" href="favicon.ico">
    <!--<link rel="icon" href="3.3/wheel.png">-->
    <link rel="stylesheet" href="style.css">
    <title>Manylinux Timeline</title>
</head>
<body>
<div class="container-fluid">
    <h1 id="title">Manylinux Timeline</h1>
    <div class="row">
        <div class="col-sm-6">
            <h2 id="lowest-policy">Lowest (required) manylinux policy</h2>
            <div><div id="lowest-policy-plot" class="plotly-graph-div"></div></div>
        </div>
        <div class="col-sm-6">
            <h2 id="highest-policy">Highest (available) manylinux policy</h2>
            <div><div id="highest-policy-plot" class="plotly-graph-div"></div></div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6">
            <h2 id="python-implementation">Python implementations</h2>
            <div><div id="python-implementation-plot" class="plotly-graph-div"></div></div>
        </div>
        <div class="col-sm-6">
            <h2 id="architecture">Architectures</h2>
            <div><div id="architecture-plot" class="plotly-graph-div"></div></div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6">
            <h2 id="what">What is this about?</h2>
            <p>Old manylinux images have reached <a href="https://github.com/mayeut/pep600_compliance/blob/master/README.rst">end of life</a>. It's about time to drop support for them.</p>
            <p>This site shows the adoption of newer manylinux images and how packagers are using them.</p>
            <p><span id="package_count">0</span> packages providing manylinux wheels have been released on <a href="https://pypi.org/">PyPI</a> in the analysis timeframe. Considering this low number of packages, the data set is smoothed using a sliding window algorithm. Only the latest version of a given package is taken into account in this 6-month window.</p>
            <p>This is not an official website, just a nice visual way to measure progress. To see the authoritative guide on wheels and other aspects of python packaging, see the <a href="https://packaging.python.org">Python Packaging User Guide</a>.</p>
        </div>
        <div class="col-sm-6">
            <h2 id="bugs">Something's wrong with this page!</h2>
            <p>Fantastic, a problem found is a problem fixed. Please <a href="https://github.com/mayeut/manylinux-timeline/issues/">create a ticket</a>!</p>
            <p>You can also <a href="https://github.com/mayeut/manylinux-timeline/pulls/">submit a pull request</a>.</p>
            <h2 id="thanks">Thanks</h2>
            <p>Thanks to <a href="https://hugovk.github.io/drop-python/">Drop Python</a>, <a href="https://pythonwheels.com/">Python Wheels</a> and <a href="https://python3wos.appspot.com/">Python 3 Wall of Superpowers</a> for the concept and making their code open source.</p>
        </div>

    </div>
    <footer>
        <p class="footer">Last updated <span id="last_update">never</span>. (Updated weekly.)</p>
        <a class="github-fork-ribbon" href="https://github.com/mayeut/manylinux-timeline" target="_blank" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
    </footer>
</div>
<script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
<script src="https://cdn.plot.ly/plotly-latest.min.js" charset="utf-8"></script>
<!--<script src="plotly-latest.js" charset="utf-8"></script>-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    window.PLOTLYENV=window.PLOTLYENV || {};
    function load_plot(id, index, series, stacked) {
        const colors = ["#636efa", "#ef553b", "#00cc96", "#ab63fa", "#ffa15a", "#19d3f3", "#ff6692", "#b6e880", "#ff97ff", "#fecb52", "#636efa",  "#ef553b", "#00cc96", "#ab63fa", "#ffa15a"];
        var global_parameters = {"mode": "lines", "orientation": "v", "showlegend": true, "x": index, "xaxis": "x", "yaxis": "y"};

        if (stacked) {
            global_parameters = Object.assign(global_parameters, {"stackgroup": 1, "type": "scatter"});
        }
        else {
            global_parameters = Object.assign(global_parameters, {"type": "scattergl"});
        }
        var series_parameters = [];
        series.keys.forEach(function (key, index) {
            new_series = Object.assign({}, global_parameters);
            new_series = Object.assign(new_series, {"y":series[key], "legendgroup": key, "name": key, "line": {"color": colors[index]}});
            series_parameters.push(new_series);
        });
        Plotly.newPlot(id, series_parameters, {"hovermode": "x unified", "legend": {"orientation": "h", "tracegroupgap": 0, "x": 0.5, "xanchor": "center", "y": 1.0, "yanchor": "bottom"}, "margin": {"b": 80, "l": 0, "r": 0, "t": 0}, "template": { "layout": { "plot_bgcolor": "#E5ECF6", "xaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "tickangle": 45}, "yaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "zerolinecolor": "white", "tickformat": ",.1%"}}}}, {"displayModeBar": false, "responsive": true});
    }
    function update_data(data) {
        $("#last_update").text(data.last_update)
        $("#package_count").text(data.package_count)
        load_plot("lowest-policy-plot", data.index, data.lowest_policy, true);
        load_plot("highest-policy-plot", data.index, data.highest_policy, true);
        load_plot("python-implementation-plot", data.index, data.implementation, false);
        load_plot("architecture-plot", data.index, data.architecture, false);
    }
    $.getJSON("data.json")
        .done(function( json ) {
            update_data(json);
        })
        .fail(function( jqxhr, textStatus, error ) {
            var err = textStatus + ", " + error;
            console.log( "Request Failed: " + err );
            alert("Can't load data !");
        });
</script>
</body>
</html>
